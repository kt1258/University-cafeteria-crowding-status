# ==========================================
# ★モデル設定エリア (分析結果の反映)
# ==========================================
# 画像の係数 (b0〜b6)
MODEL_COEFFS = {
    'b0': 2.03,    # 切片
    'b1': 0.685,   # W(T): 現在の行列人数
    'b2': -1.53,   # in_1: かえで側(3分平均)
    'b3': -0.341,  # in_2: さつき側(5分平均)
    'b4': 4.44,    # d1: 12:00-12:19
    'b5': 10.8,    # d2: 12:20-12:39
    'b6': 10.6     # d3: 12:40-12:59
}

# 時間変換の設定 (人数 ÷ この数字 ＝ 分)
PEOPLE_PER_MINUTE = 6.66

# ==========================================
# 予測ロジック関数
# ==========================================

def predict_model2(w: float, in1_ave: float, in2_ave: float, d1: float, d2: float, d3: float) -> float:
    """
    AWSから受け取った計算済みデータを使って予測する
    W(T+5) = b0 + b1*W + b2*in_1ave3 + b3*in_2ave5 + b4*d1 + b5*d2 + b6*d3
    
    Args:
        w: 現在の行列人数
        in1_ave: かえで側の3分平均入場者数
        in2_ave: さつき側の5分平均入場者数
        d1: 12:00-12:19のダミー変数(0 or 1)
        d2: 12:20-12:39のダミー変数(0 or 1)
        d3: 12:40-12:59のダミー変数(0 or 1)
    
    Returns:
        float: 5分後の予測行列人数（最小値0）
    """
    c = MODEL_COEFFS
    
    # そのまま計算式に適用
    pred_people = (
        c['b0'] +
        c['b1'] * w +
        c['b2'] * in1_ave +
        c['b3'] * in2_ave +
        c['b4'] * d1 +
        c['b5'] * d2 +
        c['b6'] * d3
    )
    
    # マイナスにならないよう補正して返す
    return max(0, pred_people)